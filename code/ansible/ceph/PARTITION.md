Разбиение блочных устройств на разделы
======================================

Описание
--------

Плейбук предназначен для разбиения блочных устройств на разделы. При разбиении создаются **GPT** таблица, блочные устройства разбиваются посредством parted. Есть возможность "прокрутить" плейбук в обратном направлении, удаляя ранее созданные разделы.

Структура
---------

    partitions.yaml

тело плейбука

Настройка
---------

> Плейбук применяется к хостам внесённым в группу **`partitions`**

Пример конфигурации:

    partitions:
    - device: /dev/sdd
      label: PARTLABEL # optional
      num: 1
      start: 0%
      end: 10%
    - device: /dev/sdd
      num: 2
      start: 10%
      end: 100%

Входными данными является массив `partitions`, каждый элемент описывает раздел создаваемый/удаляемый раздел.

### Описание раздела

- `device` - блочное устройство на котором будет создан раздел
- `num`    - номер раздела
- `start`  - адрес начала раздела
- `end`    - адрес конца раздела

Адреса начала и конца разделов задаются в формате команды **parted**. (например 20%, 1735s, 4096B, 600GiB, 3TB ит.д.) Адреса носят абсолютный характер.

Результат работы
----------------

По окончании работы, создаются разделы описанные в настройке плейбука.

При запуске плейбука с аргументом командной строки `-e destroy=true`, происходит удаление разделов описанных в конфигурации.
> Параметр `destroy` также может быть задан через переменные на уровне группы хостов или точечно - для одного хоста)


